@using X.PagedList.Mvc.Core
@using X.PagedList
@model X.PagedList.IPagedList<Stock>

@{
    ViewData["Title"] = "Danh sách kho";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container_padding">
    <div class="filter-section">
        <form id="filterForm" style="display:flex; justify-content:space-between" method="get" action="@Url.Action("Search", "Stock")">
            <div class="filter-group-container_padding">
                <div class="filter-label">Khu vực</div>
                <div class="filter-content">
                    <div class="filter-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    @Html.DropDownList("province", new SelectList(ViewBag.Provinces as string[]), "Select province", new { @class = "filter-select", onchange = "this.form.submit()" })
                </div>
            </div>

            <div class="filter-group-container_padding">
                <div class="filter-label">Loại kho</div>
                <div class="filter-content">
                    <div class="filter-icon">
                        <i class="fas fa-warehouse"></i>
                    </div>
                    @Html.DropDownList("type", new SelectList(ViewBag.Types as string[]), "Select type", new { @class = "filter-select", onchange = "this.form.submit()" })
                </div>
            </div>

            <div class="filter-group-container_padding">
                <div class="filter-label">Diện tích</div>
                <div class="filter-content">
                    <div class="filter-icon">
                        <i class="fas fa-expand-arrows-alt"></i>
                    </div>
                    @Html.TextBox("area", "", new { @class = "form-control no-border", onchange = "this.form.submit()" })
                </div>
            </div>
        </form>
    </div>

    <div id="searchResults">

        @await Html.PartialAsync("_StockList", Model)
    </div>

</div>

<script>
           $(document).ready(function () {
        $('#provinceDropdown, #typeDropdown, #areaDropdown').change(function () {
            var province = $('#provinceDropdown').val();
            var type = $('#typeDropdown').val();
            var area = $('#areaDropdown').val();

            $.ajax({
                url: '@Url.Action("Search", "Stock")',
                type: 'GET',
                data: {
                    province: province,
                    type: type,
                    area: area
                },
                success: function (data) {
                    $('#searchResults').html(data);
                },
                error: function (xhr, status, error) {
                    console.error("AJAX error: " + status + ": " + error);
                }
            });
        });
    });
</script>

<style>
    body {
        background-color: #f5f5f5;
    }

    .container_padding {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }

    .filter-section {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        margin-bottom: 20px;
        background-color: white;
        padding: 10px;
        border-radius: 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }


    .no-border {
        border: none !important;
        outline: none !important; 
    }

    .filter-label {
        font-weight: bold;
        color: #333;
        padding-bottom: 5px;
        display: block;
        text-transform: uppercase;
        font-size: 12px;
    }

    .filter-content {
        display: flex;
        align-items: center;
        border: 1px solid #ccc;
        border-radius: 0;
        padding: 0;
        position: relative;
    }

    .filter-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: white;
        padding: 8px 10px;
        border-right: 1px solid #ddd;
    }

    .filter-select {
        padding: 8px 25px 8px 10px;
        border: none;
        min-width: 120px;
        appearance: none;
        background: white url('data:image/svg+xml;utf8,<svg fill="black" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat;
        background-position: right 0px top 50%;
    }

    .area-input {
        padding: 8px 10px;
        border: none;
        width: 100%;
    }


    .pagination {
        display: flex;
        justify-content: center;
        text-align: center;
        margin: 0px 0px 20px 0px;
    }

        .pagination a, .pagination span {
            display: inline-block;
            padding: 5px 10px;
            text-decoration: none;
            border: 1px solid #ddd;
            color: gray;
        }

        .pagination .active {
            border: 1px solid black;
            background: #0f2649;
            color: white !important;
        }

</style>

