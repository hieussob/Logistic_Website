@using X.PagedList.Mvc.Core
@using X.PagedList
@model X.PagedList.IPagedList<VesselSchedule>
@{
    ViewData["Title"] = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="page-title">LỊCH TÀU</div>

    <!-- Schedule List -->
    <div class="schedule-list">
        @{
            if (Model.Count == 0)
            {
                <div class="alert alert-warning text-center">
                    <strong>Không tìm thấy lịch tàu nào!</strong>
                </div>
            }
        }
        @foreach (var item in Model)
        {
            <div class="schedule-item">
                <div class="shipping-line">@item.Line</div>
                <a href="#" class="fee-link">Xem biểu phí</a>

                <div class="route-info">
                    <div class="location">
                        <div class="location-icon">
                            <i class="fa-solid fa-location-dot"></i>
                        </div>
                        <div class="location-name">@item.Origin</div>
                        <div class="location-date">@item.ETA</div>
                    </div>

                    <div class="route-arrow">
                        <i class="fa-solid fa-arrow-right"></i>
                    </div>

                    <div class="location">
                        <div class="location-icon">
                            <i class="fa-solid fa-location-dot"></i>
                        </div>
                        <div class="location-name">@item.Destination</div>
                        <div class="location-date">@item.ETD</div>
                    </div>
                </div>

                <div class="schedule-details">
                    <div class="days-count">39 DAY(S)</div>

                    <div class="vessel-info">
                        <div class="vessel-label"><i class="fa-solid fa-ship"></i> Vessel/Voyage</div>
                        <div class="vessel-name">@item.Vessel</div>
                    </div>

                    <span class="status-label">@item.Service</span>

                    <div class="action-buttons">
                        <button class="action-button cut-off-btn">VGM Cut Off</button>
                        <button class="action-button schedule-btn">Lưu lịch tàu</button>
                        <button class="action-button detail-btn">Chi tiết</button>
                    </div>
                        
                  </div>
                    <div class="detail-content" style="display:none; margin-top: 10px;">
                        <!-- Departure -->
                        <div class="detail-row">
                            <span class="detail-icon"><i class="fa-solid fa-location-dot"></i></span>
                            <span class="detail-port">@item.Origin</span>
                            <span class="detail-time">@item.ETD</span>
                            <span class="detail-subtext">• ETD at POL</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label"></span>
                            <span class="detail-subtext" style="margin-left:-100px">GREEN PORT</span>
                        </div>

                        <!-- Hub 1 -->
                        <div class="detail-vessel">
                            <div class="detail-row">
                                <i class="fa-solid fa-ship"></i>
                                <span>@item.Vessel</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-icon"><i class="fa-solid fa-location-dot"></i></span>
                                <span class="detail-port">@item.Hub</span>
                                <span class="detail-time">@item.ETAHub</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label"></span>
                                    <span class="detail-subtext" style="margin-left:-100px">KBCT(BPT SINSEONDAE)</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-icon"><i class="fa-solid fa-location-dot"></i></span>
                                <span class="detail-port">@item.Hub</span>
                                <span class="detail-time">@item.ETDHub</span>
                                <span class="detail-subtext">• ETD at POL</span>
                            </div>
                        </div>

                        <!-- Arrival -->
                        <div class="detail-vessel">
                            <div class="detail-row">
                                <i class="fa-solid fa-ship"></i>
                                <span>@item.MV</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-icon"><i class="fa-solid fa-location-dot" style="color:green;"></i></span>
                                <span class="detail-port">@item.Destination</span>
                                <span class="detail-time">@item.ETA</span>
                                <span class="detail-subtext">• ETA at POL</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label"></span>
                                    <span class="detail-subtext" style="margin-left:-100px">SINGAPORE PORT AUTHORITY(S.A.)</span>
                            </div>
                        </div>
                    </div>
            </div>
        }
    </div>


    <div class="text-center">
        @Html.PagedListPager(Model, page => Url.Action("Search", new { page }),
                 new PagedListRenderOptions
        {
            Display = PagedListDisplayMode.IfNeeded,
            UlElementClasses = new[] { "pagination", "justify-content-center" },
            LiElementClasses = new[] { "page-item" },
            LinkToPreviousPageFormat = "<",
            LinkToNextPageFormat = ">"
        })
    </div>
</div>

@section Scripts {
        <script>
            $(document).ready(function () {
                $('.detail-btn').on('click', function () {
                    var detail = $(this).closest('.schedule-item').find('.detail-content');
                    detail.slideToggle(); 
                });
            });
        </script>
}


<style>
    /* Pagination */
    .pagination {
        display: flex;
        justify-content: center;
        text-align: center;
        margin: 0px 0px 20px 0px;
    }

    .pagination a, .pagination span {
        display: inline-block;
        padding: 5px 10px;
        text-decoration: none;
        border: 1px solid #ddd;
        color: gray;
    }

    .pagination .active {
        border: 1px solid black;
        background: #0f2649;
        color: white !important;
    }
    .detail-content {
        padding: 16px;
        background-color: #f0f0f0;
        font-family: "Segoe UI", sans-serif;
        font-size: 14px;
    }

    .detail-row {
        display: flex;
        align-items: left;
        gap: 8px;
        margin-bottom: 6px;
    }

    .detail-label {
        font-weight: bold;
        color: #333;
        min-width: 100px;
    }

    .detail-icon {
        width: 20px;
        text-align: center;
        color: #007bff;
    }

    .detail-port {
        font-weight: 500;
    }

    .detail-time {
        font-weight: 600;
    }

    .detail-subtext {
        color: #777;
        font-size: 13px;
    }

    .detail-vessel {
        background-color: #f9f9f9;
        padding: 8px 12px;
        margin: 12px 0;
        border-radius: 6px;
    }

    .detail-vessel i {
        color: #007bff;
        margin-right: 6px;
    }
</style>


